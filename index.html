<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>30-Day Study Streak Challenge</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
      /* Custom Font Family */
      body {
        font-family: 'Inter', sans-serif;
      }
      /* Input and Button Focus Style */
      input:focus,
      button:focus {
        outline: none;
        box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.5); /* Blue-500 with 50% opacity */
      }
      /* Input and Button Transition */
      input,
      button {
        transition: all 0.2s ease-in-out;
      }
      /* Scrollbar style for table section */
      .overflow-auto::-webkit-scrollbar {
        height: 8px;
      }
      .overflow-auto::-webkit-scrollbar-thumb {
        background-color: #cbd5e1; /* slate-300 */
        border-radius: 4px;
      }
      .overflow-auto::-webkit-scrollbar-track {
        background-color: #f1f5e5; /* slate-100 */
      }
      /* Custom Keyframe Animations */
      @keyframes bounce-in {
        0% {
          opacity: 0;
          transform: translateY(20px) scale(0.8);
        }
        50% {
          opacity: 1;
          transform: translateY(-10px) scale(1.05);
        }
        100% {
          opacity: 1;
          transform: translateY(0) scale(1);
        }
      }
      @keyframes fade-in-up {
        0% {
          opacity: 0;
          transform: translateY(10px);
        }
        100% {
          opacity: 1;
          transform: translateY(0);
        }
      }
      @keyframes slide-in-left {
        0% {
          opacity: 0;
          transform: translateX(-20px);
        }
        100% {
          opacity: 1;
          transform: translateX(0);
        }
      }
      .animate-bounce-in {
        animation: bounce-in 0.4s ease-out forwards;
      }
      .animate-fade-in-up {
        animation: fade-in-up 0.5s ease-out forwards;
      }
      .animate-slide-in-left {
        animation: slide-in-left 0.5s ease-out forwards;
      }
      .animate-pulse-fade {
        animation: pulse-fade 1.5s infinite alternate;
      }
      @keyframes pulse-fade {
        0% {
          opacity: 1;
        }
        100% {
          opacity: 0.5;
        }
      }
      /* Drag and Drop styles */
      .dragging {
        opacity: 0.5;
        border: 2px dashed #9ca3af;
      }
      .drop-target {
        background-color: #e0f2fe; /* Light blue background for drop zone */
        border: 2px dashed #60a5fa; /* Blue dashed border */
      }
      
      /* New highlight style for search */
      .highlighted-row {
        background-color: #d1fae5; /* A gentle green highlight */
        transition: background-color 0.5s ease;
      }

      /* Search suggestions styles */
      .suggestions-container {
        max-height: 200px;
        overflow-y: auto;
      }
      .suggestions-container::-webkit-scrollbar {
        width: 8px;
      }
      .suggestions-container::-webkit-scrollbar-thumb {
        background-color: #cbd5e1;
        border-radius: 4px;
      }
      .suggestions-container::-webkit-scrollbar-track {
        background-color: #f1f5e5;
      }
    </style>
  </head>
  <body class="bg-gradient-to-br from-gray-100 to-gray-200 min-h-screen flex items-center justify-center py-10 px-4 font-inter">
    <div id="root"></div>
    <script type="text/babel">
      const { useMemo, useState, useEffect, useRef } = React;
      
      // The original __app_id and __firebase_config variables are not used since localStorage is requested.
      // This is a placeholder to prevent linting errors.
      const __app_id = typeof window !== 'undefined' ? (window.__app_id || 'default-app-id') : 'default-app-id';
      
      function StudyStreakApp() {
        // ---- Helper Functions ---- //
        const normalizeParticipants = (list) =>
          (list || []).map((p) => ({
            name: p.name ?? '',
            current: Number.isFinite(p.current) ? p.current : 0,
            max: Number.isFinite(p.max) ? p.max : 0,
            time: Number.isFinite(p.time) ? p.time : 0,
            banned: !!p.banned,
            warnings: Number.isFinite(p.warnings) ? p.warnings : 0,
            withdrawn: !!p.withdrawn,
          }));

        const formatName = (p) => {
          const n = (p.name || '').trim();
          const w = p.warnings || 0;
          return w > 0 ? `${n}⚠️-${w}` : n;
        };

        const storedData = localStorage.getItem('studyStreakData');
        const initialState = storedData
          ? (() => {
              try {
                const parsed = JSON.parse(storedData);
                return {
                  day: parsed.day ?? 1,
                  participants: normalizeParticipants(parsed.participants),
                };
              } catch {
                return null;
              }
            })()
          : null;

        const [day, setDay] = useState(initialState?.day ?? 1);
        const [participants, setParticipants] = useState(
          initialState?.participants ??
            normalizeParticipants([
              { name: 'Siam', current: 0, max: 0, time: 0, banned: false, warnings: 0, withdrawn: false },
              { name: 'Saima!!!!', current: 0, max: 0, time: 0, banned: false, warnings: 0, withdrawn: false },
              { name: 'Nafi07', current: 0, max: 0, time: 0, banned: false, warnings: 0, withdrawn: false },
              { name: "L'miss", current: 0, max: 0, time: 0, banned: false, warnings: 0, withdrawn: false },
              { name: '🍃', current: 0, max: 0, time: 0, banned: false, warnings: 0, withdrawn: false },
            ])
        );

        // ---- New state for search functionality ----
        const [searchQuery, setSearchQuery] = useState('');
        const [highlightedName, setHighlightedName] = useState(null);
        
        // State for drag and drop
        const dragItem = useRef(null);
        const dragOverItem = useRef(null);
        
        useEffect(() => {
          localStorage.setItem('studyStreakData', JSON.stringify({ day, participants }));
        }, [day, participants]);

        const update = (idx, key, value) => {
          setParticipants((prev) => {
            const next = [...prev];
            const row = { ...next[idx] };
            if (key === 'name') {
              row.name = value;
            } else if (key === 'current') {
              const v = Math.max(0, parseInt(value || 0, 10));
              row.current = isNaN(v) ? 0 : v;
              row.max = Math.max(row.max || 0, row.current || 0);
            } else if (key === 'max') {
              const v = Math.max(0, parseInt(value || 0, 10));
              row.max = isNaN(v) ? 0 : v;
              if ((row.current || 0) > row.max) row.max = row.current;
            } else if (key === 'time') {
              const v = Math.max(0, parseFloat(value || 0));
              row.time = isNaN(v) ? 0 : v;
            } else if (key === 'banned') {
              row.banned = value;
            } else if (key === 'warnings') {
              const v = Math.max(0, parseInt(value || 0, 10));
              row.warnings = isNaN(v) ? 0 : v;
            } else if (key === 'withdrawn') {
              row.withdrawn = value;
            }
            next[idx] = row;
            return next;
          });
        };

        const addRow = () =>
          setParticipants((p) => [...p, { name: '', current: 0, max: 0, time: 0, banned: false, warnings: 0, withdrawn: false }]);
        const removeRow = (idx) => setParticipants((p) => p.filter((_, i) => i !== idx));
        const resetCurrent = (idx) => update(idx, 'current', 0);
        const incWarning = (idx, delta) => {
          setParticipants((prev) => {
            const next = [...prev];
            const row = { ...next[idx] };
            row.warnings = Math.max(0, (row.warnings || 0) + delta);
            next[idx] = row;
            return next;
          });
        };

        const resetAllStudyTime = () => {
          setParticipants((prev) => prev.map((p) => ({ ...p, time: 0 })));
        };

        // ---- New search and highlight logic ----
        const handleSearchHighlight = (name) => {
          setSearchQuery(''); // Clear search query to hide suggestions
          setHighlightedName(name); // Set the name to highlight
          const rowElement = document.getElementById(`participant-row-${name.replace(/[^a-zA-Z0-9]/g, '')}`);
          if (rowElement) {
              rowElement.scrollIntoView({ behavior: 'smooth', block: 'center' });
          }
          setTimeout(() => {
            setHighlightedName(null); // Clear highlight after a delay
          }, 3000);
        };

        const filteredSuggestions = useMemo(() => {
          if (!searchQuery) {
            return [];
          }
          const lowerQuery = searchQuery.toLowerCase();
          return participants
            .filter(p => !p.banned && !p.withdrawn && p.name.toLowerCase().includes(lowerQuery))
            .slice(0, 10);
        }, [searchQuery, participants]);

        const activeParticipants = participants.filter((p) => !p.banned && !p.withdrawn && (p.name || '').trim() !== '');
        const bannedParticipants = participants.filter((p) => p.banned && (p.name || '').trim() !== '');
        const withdrawnParticipants = participants.filter((p) => p.withdrawn && (p.name || '').trim() !== '');

        const sortedTop5 = useMemo(() => {
          const active = activeParticipants.filter((p) => (p.current || 0) > 0);
          return [...active]
            .sort((a, b) => {
              if (b.current !== a.current) return b.current - a.current;
              if (b.max !== a.max) return b.max - a.max;
              return (b.time || 0) - (a.time || 0);
            })
            .slice(0, 5);
        }, [activeParticipants]);

        const wipedOut = useMemo(() => activeParticipants.filter((p) => (p.current || 0) === 0), [activeParticipants]);

        const sortedAllExcludingTop5AndWipedOut = useMemo(() => {
          const top5Names = new Set(sortedTop5.map((p) => p.name));
          const wipedOutNames = new Set(wipedOut.map((p) => p.name));
          return [...activeParticipants]
            .filter((p) => !top5Names.has(p.name) && !wipedOutNames.has(p.name))
            .sort((a, b) => {
              if (b.current !== a.current) return b.current - a.current;
              if (b.max !== a.max) return b.max - a.max;
              return (b.time || 0) - (a.time || 0);
            });
        }, [activeParticipants, sortedTop5, wipedOut]);

        const reportText = useMemo(() => {
          const lines = [];
          lines.push('### **📚 30-Day Study Streak Challenge: Daily Report! 🚀**\n');
          lines.push(`**🔥 Day [${day}] Leaderboard! 🔥**\n`);
          lines.push('**👑 Today\'s Top 5!**\n');
          const badges = ['🌟', '✨', '💪', '🧠', '🚀'];
          for (let i = 0; i < 5; i++) {
            const p = sortedTop5[i];
            if (p) {
              lines.push(`${i + 1}. ${badges[i]} [${formatName(p)}] - Current Streak: [${p.current}] Days | Max Streak: [${p.max}] Days`);
            } else {
              lines.push(`${i + 1}. ${badges[i]} —`);
            }
          }
          lines.push('\n**Other Participants (excluding Top 5 and Wipeout Zone)**\n');
          if (sortedAllExcludingTop5AndWipedOut.length === 0) {
            lines.push('No other participants to list.');
          } else {
            sortedAllExcludingTop5AndWipedOut.forEach((p) => {
              lines.push(`- [${formatName(p)}] - Current Streak: [${p.current}] Days | Max Streak: [${p.max}] Days`);
            });
          }
          lines.push('\n### **❌ The Wipeout Zone**');
          lines.push(`**(${wipedOut.length} total)**\n`);
          wipedOut.forEach((p) => lines.push(`- [${formatName(p)}] - (Current Streak reset)`));
          lines.push('\n### 🚫 **Banned Zone**');
          if (bannedParticipants.length > 0) {
            bannedParticipants.forEach((p) => lines.push(`- [${formatName(p)}] - (Banned from challenge)`));
          } else {
            lines.push('No banned participants today.');
          }
          lines.push('\n### 👋 **Withdrawn Zone**');
          if (withdrawnParticipants.length > 0) {
            withdrawnParticipants.forEach((p) => lines.push(`- [${formatName(p)}] - (Withdrawn from challenge)`));
          } else {
            lines.push('No participants have withdrawn.');
          }
          return lines.join('\n');
        }, [day, sortedTop5, wipedOut, sortedAllExcludingTop5AndWipedOut, bannedParticipants, withdrawnParticipants]);

        const copyReport = async () => {
          try {
            await navigator.clipboard.writeText(reportText);
            const messageBox = document.createElement('div');
            messageBox.innerText = 'Report copied to clipboard!';
            messageBox.className = 'fixed bottom-4 left-1/2 -translate-x-1/2 bg-green-500 text-white px-4 py-2 rounded-xl shadow-lg z-50 animate-bounce-in';
            document.body.appendChild(messageBox);
            setTimeout(() => {
              document.body.removeChild(messageBox);
            }, 2000);
          } catch (err) {
            console.error('Failed to copy using clipboard API:', err);
            const ta = document.getElementById('report-ta');
            ta.select();
            document.execCommand('copy');
            const messageBox = document.createElement('div');
            messageBox.innerText = 'Report copied (legacy)!';
            messageBox.className = 'fixed bottom-4 left-1/2 -translate-x-1/2 bg-yellow-500 text-white px-4 py-2 rounded-xl shadow-lg z-50 animate-bounce-in';
            document.body.appendChild(messageBox);
            setTimeout(() => {
              document.body.removeChild(messageBox);
            }, 2000);
          }
        };

        // ---- Drag and Drop handlers ----
        const handleDragStart = (e, index) => {
            dragItem.current = index;
            e.target.classList.add('dragging');
        };

        const handleDragEnter = (e, index) => {
            dragOverItem.current = index;
            e.preventDefault();
        };

        const handleDragLeave = (e) => {
            e.target.classList.remove('drop-target');
        };

        const handleDragOver = (e) => {
            e.preventDefault();
            const target = e.currentTarget;
            if (target && !target.classList.contains('drop-target')) {
                // To avoid flickering, only add the class if it's not already there
                target.classList.add('drop-target');
            }
        };
        
        const handleDrop = (e) => {
            e.preventDefault();
            const newList = [...participants];
            const draggedIndex = dragItem.current;
            const droppedIndex = dragOverItem.current;
            
            // Reorder the list
            const [draggedItem] = newList.splice(draggedIndex, 1);
            newList.splice(droppedIndex, 0, draggedItem);
            
            setParticipants(newList);
            dragItem.current = null;
            dragOverItem.current = null;
            
            // Clean up the CSS classes
            e.target.closest('tr').classList.remove('dragging', 'drop-target');
        };

        const handleDragEnd = (e) => {
            e.target.classList.remove('dragging');
            const allRows = document.querySelectorAll('tbody tr');
            allRows.forEach(row => row.classList.remove('drop-target'));
        };

        return (
          <div className="max-w-7xl mx-auto w-full space-y-8 p-4 sm:p-8 bg-white rounded-3xl shadow-2xl transform transition-all duration-300 ease-in-out">
            <header className="flex flex-col sm:flex-row sm:items-end sm:justify-between gap-6 pb-6 border-b border-gray-700 bg-gray-900 rounded-t-3xl p-6 sm:p-8 -mt-8 -mx-8 -mb-6">
              <div>
                <h1 className="text-4xl sm:text-5xl font-extrabold text-white leading-tight">📚 30-Day Study Streak Challenge</h1>
                <p className="text-gray-300 mt-2 text-lg">Manage streaks, warnings, see leaders, and generate a ready-to-post report.</p>
              </div>
              <div className="flex flex-col sm:flex-row items-center gap-4">
                <div className="flex items-center gap-4 bg-gray-800 px-5 py-3 rounded-2xl shadow-inner border border-gray-700">
                  <label className="text-lg font-medium text-gray-300">Day:</label>
                  <input
                    type="number"
                    min={1}
                    className="border-2 border-gray-600 rounded-xl px-4 py-2 w-28 text-center text-xl font-bold text-white bg-gray-700 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all duration-200"
                    value={day}
                    onChange={(e) => setDay(parseInt(e.target.value || 1, 10))}
                  />
                </div>
                <button
                  onClick={resetAllStudyTime}
                  className="px-6 py-3 bg-red-600 text-white font-semibold rounded-2xl shadow-lg hover:bg-red-700 active:scale-95 active:shadow-xl transition-all duration-200 ease-in-out transform hover:-translate-y-0.5"
                >
                  Reset Study Time
                </button>
              </div>
            </header>
            <section className="bg-white rounded-3xl shadow-xl p-6 sm:p-8 space-y-6 border border-gray-200 animate-fade-in-up" style={{ animationDelay: '0.1s' }}>
              <div className="flex flex-col sm:flex-row items-center justify-between gap-4">
                <h2 className="text-2xl font-bold text-gray-700">1) Data Entry</h2>
                <div className="relative w-full sm:w-1/2 md:w-1/3">
                  <input
                    type="text"
                    placeholder="Search for a participant..."
                    value={searchQuery}
                    onChange={(e) => setSearchQuery(e.target.value)}
                    className="w-full border-2 border-gray-300 rounded-xl px-4 py-3 bg-white shadow-sm focus:border-blue-500 focus:ring-1 focus:ring-blue-200 transition-all duration-200"
                  />
                  {searchQuery && filteredSuggestions.length > 0 && (
                    <div className="absolute top-full left-0 right-0 mt-2 bg-white border border-gray-200 rounded-xl shadow-xl z-10 suggestions-container">
                      {filteredSuggestions.map((p, i) => (
                        <div 
                          key={i} 
                          onClick={() => handleSearchHighlight(p.name)}
                          className="px-4 py-2 hover:bg-gray-100 cursor-pointer transition-colors duration-150 rounded-lg mx-2 my-1"
                        >
                          {p.name}
                        </div>
                      ))}
                    </div>
                  )}
                </div>
                <button
                  onClick={addRow}
                  className="px-6 py-3 bg-blue-600 text-white font-semibold rounded-2xl shadow-lg hover:bg-blue-700 active:scale-95 active:shadow-xl transition-all duration-200 ease-in-out transform hover:-translate-y-0.5"
                >
                  + Add New Row
                </button>
              </div>
              <div className="overflow-auto rounded-xl border border-gray-200 shadow-inner">
                <table className="min-w-full text-base">
                  <thead>
                    <tr className="bg-gray-100 text-gray-800 text-left font-semibold">
                      <th className="p-3 whitespace-nowrap w-[calc(var(--max-width)_-_(8rem*5)_-_(10rem))]">Name</th>
                      <th className="p-3 whitespace-nowrap w-20">Current Streak</th>
                      <th className="p-3 whitespace-nowrap w-20">Maximum Streak</th>
                      <th className="p-3 whitespace-nowrap w-24">Study Time (hrs)</th>
                      <th className="p-3 whitespace-nowrap w-24">Warnings</th>
                      <th className="p-3 whitespace-nowrap w-20">Banned?</th>
                      <th className="p-3 whitespace-nowrap w-20">Withdrawn?</th>
                      <th className="p-3 whitespace-nowrap w-36">Actions</th>
                    </tr>
                  </thead>
                  <tbody>
                    {participants.map((p, idx) => (
                      <tr
                        key={idx}
                        id={`participant-row-${p.name.replace(/[^a-zA-Z0-9]/g, '')}`}
                        className={`border-b border-gray-100 even:bg-gray-50 hover:bg-gray-100 transition-all duration-150 animate-fade-in-up cursor-grab ${p.name === highlightedName ? 'highlighted-row' : ''}`}
                        style={{ animationDelay: `${0.2 + idx * 0.05}s` }}
                        draggable="true"
                        onDragStart={(e) => handleDragStart(e, idx)}
                        onDragEnter={(e) => handleDragEnter(e, idx)}
                        onDragLeave={handleDragLeave}
                        onDragOver={handleDragOver}
                        onDrop={handleDrop}
                        onDragEnd={handleDragEnd}
                      >
                        <td className="p-3">
                          <input
                            className="w-full border border-gray-300 rounded-xl px-3 py-2 bg-white shadow-sm focus:border-blue-500 focus:ring-1 focus:ring-blue-200"
                            value={p.name}
                            onChange={(e) => update(idx, 'name', e.target.value)}
                          />
                          {p.warnings > 0 && <div className="text-xs text-orange-600 font-medium mt-1 animate-pulse-fade">{`⚠️-${p.warnings} Warning!`}</div>}
                        </td>
                        <td className="p-3">
                          <input
                            type="number"
                            min={0}
                            className="w-20 border border-gray-300 rounded-xl px-3 py-2 bg-white shadow-sm text-center focus:border-blue-500 focus:ring-1 focus:ring-blue-200"
                            value={p.current}
                            onChange={(e) => update(idx, 'current', e.target.value)}
                          />
                        </td>
                        <td className="p-3">
                          <input
                            type="number"
                            min={0}
                            className="w-20 border border-gray-300 rounded-xl px-3 py-2 bg-white shadow-sm text-center focus:border-blue-500 focus:ring-1 focus:ring-blue-200"
                            value={p.max}
                            onChange={(e) => update(idx, 'max', e.target.value)}
                          />
                        </td>
                        <td className="p-3">
                          <input
                            type="number"
                            min={0}
                            step="0.1"
                            className="w-24 border border-gray-300 rounded-xl px-3 py-2 bg-white shadow-sm text-center focus:border-blue-500 focus:ring-1 focus:ring-blue-200"
                            value={p.time || ''}
                            onChange={(e) => update(idx, 'time', e.target.value)}
                          />
                        </td>
                        <td className="p-3">
                          <div className="flex items-center gap-2">
                            <button
                              onClick={() => incWarning(idx, -1)}
                              className="px-3 py-1 bg-red-100 text-red-700 font-bold rounded-lg border border-red-200 select-none hover:bg-red-200 active:scale-90 active:shadow-md transition-all duration-150"
                            >
                              -
                            </button>
                            <input
                              type="number"
                              min={0}
                              className="w-16 border border-gray-300 rounded-xl px-2 py-1 bg-white shadow-sm text-center focus:border-blue-500 focus:ring-1 focus:ring-blue-200"
                              value={p.warnings || 0}
                              onChange={(e) => update(idx, 'warnings', e.target.value)}
                            />
                            <button
                              onClick={() => incWarning(idx, +1)}
                              className="px-3 py-1 bg-green-100 text-green-700 font-bold rounded-lg border border-green-200 select-none hover:bg-green-200 active:scale-90 active:shadow-md transition-all duration-150"
                            >
                              +
                            </button>
                          </div>
                        </td>
                        <td className="p-3 text-center">
                          <input
                            type="checkbox"
                            checked={p.banned}
                            onChange={(e) => update(idx, 'banned', e.target.checked)}
                            className="w-5 h-5 accent-blue-600 cursor-pointer"
                          />
                        </td>
                        <td className="p-3 text-center">
                          <input
                            type="checkbox"
                            checked={p.withdrawn}
                            onChange={(e) => update(idx, 'withdrawn', e.target.checked)}
                            className="w-5 h-5 accent-purple-600 cursor-pointer"
                          />
                        </td>
                        <td className="p-3 flex gap-2">
                          <button
                            onClick={() => resetCurrent(idx)}
                            className="px-4 py-2 bg-yellow-100 text-yellow-700 rounded-xl border border-yellow-200 shadow-sm hover:bg-yellow-200 active:scale-95 active:shadow-md transition-all duration-150"
                          >
                            Reset
                          </button>
                          <button
                            onClick={() => removeRow(idx)}
                            className="px-4 py-2 bg-red-100 text-red-700 rounded-xl border border-red-200 shadow-sm hover:bg-red-200 active:scale-95 active:shadow-md transition-all duration-150"
                          >
                            Delete
                          </button>
                        </td>
                      </tr>
                    ))}
                  </tbody>
                </table>
              </div>
            </section>
            <section
              className="bg-white rounded-3xl shadow-xl p-6 sm:p-8 grid gap-8 md:grid-cols-2 border border-gray-200 animate-fade-in-up"
              style={{ animationDelay: '0.3s' }}
            >
              <div>
                <h2 className="text-2xl font-bold text-gray-700 mb-4">2) Leaderboard Preview — Top 5</h2>
                <ol className="space-y-3">
                  {Array.from({ length: 5 }, (_, i) => {
                    const p = sortedTop5[i];
                    const colors = [
                      'bg-yellow-100 border-yellow-300',
                      'bg-slate-100 border-slate-300',
                      'bg-orange-100 border-orange-300',
                      'bg-green-100 border-green-300',
                      'bg-indigo-100 border-indigo-300',
                    ];
                    return (
                      <li
                        key={i}
                        className={`p-4 border rounded-2xl shadow-md flex items-center justify-between font-semibold text-lg animate-slide-in-left ${colors[i] || 'bg-gray-50 border-gray-200'}`}
                        style={{ animationDelay: `${0.4 + i * 0.1}s` }}
                      >
                        <div>
                          {i + 1}. {p ? `${formatName(p)} (Max: ${p.max} days)` : '—'}
                        </div>
                        <div className="text-gray-800">
                          Current: {p ? `${p.current} days` : '—'}
                        </div>
                      </li>
                    );
                  })}
                </ol>
              </div>
              <div>
                <h2 className="text-2xl font-bold text-gray-700 mb-4">
                  Wipeout Zone ({wipedOut.length})
                </h2>
                {wipedOut.length === 0 ? (
                  <div className="text-gray-500 italic p-4 bg-gray-50 rounded-xl border border-gray-200">
                    None in wipeout zone today!
                  </div>
                ) : (
                  <ul className="space-y-3">
                    {wipedOut.map((p, i) => (
                      <li
                        key={p.name + i}
                        className="p-4 border border-red-300 rounded-2xl shadow-md flex items-center justify-between bg-red-100 font-medium animate-slide-in-left"
                        style={{ animationDelay: `${0.4 + i * 0.1}s` }}
                      >
                        <div>{formatName(p)}</div>
                        <div className="text-red-700 font-bold">Streak reset 🚫</div>
                      </li>
                    ))}
                  </ul>
                )}
              </div>
            </section>
            <section
              className="bg-white rounded-3xl shadow-xl p-6 sm:p-8 space-y-6 border border-gray-200 animate-fade-in-up"
              style={{ animationDelay: '0.5s' }}
            >
              <h2 className="text-2xl font-bold text-gray-700">
                🚫 Banned Zone ({bannedParticipants.length})
              </h2>
              {bannedParticipants.length === 0 ? (
                <div className="text-gray-500 italic p-4 bg-gray-50 rounded-xl border border-gray-200">
                  No banned participants today.
                </div>
              ) : (
                <ul className="space-y-3">
                  {bannedParticipants.map((p, i) => (
                    <li
                      key={p.name + i}
                      className="p-4 border border-gray-400 rounded-2xl shadow-md flex items-center justify-between bg-gray-200 font-medium animate-fade-in-up"
                      style={{ animationDelay: `${0.6 + i * 0.1}s` }}
                    >
                      <div>{formatName(p)}</div>
                      <div className="text-gray-700 font-bold">Banned from challenge</div>
                    </li>
                  ))}
                </ul>
              )}
            </section>
            <section
              className="bg-white rounded-3xl shadow-xl p-6 sm:p-8 space-y-6 border border-gray-200 animate-fade-in-up"
              style={{ animationDelay: '0.6s' }}
            >
              <h2 className="text-2xl font-bold text-gray-700">
                👋 Withdrawn Zone ({withdrawnParticipants.length})
              </h2>
              {withdrawnParticipants.length === 0 ? (
                <div className="text-gray-500 italic p-4 bg-gray-50 rounded-xl border border-gray-200">
                  No participants have withdrawn.
                </div>
              ) : (
                <ul className="space-y-3">
                  {withdrawnParticipants.map((p, i) => (
                    <li
                      key={p.name + i}
                      className="p-4 border border-purple-300 rounded-2xl shadow-md flex items-center justify-between bg-purple-100 font-medium animate-fade-in-up"
                      style={{ animationDelay: `${0.7 + i * 0.1}s` }}
                    >
                      <div>{formatName(p)}</div>
                      <div className="text-purple-700 font-bold">Withdrawn from challenge</div>
                    </li>
                  ))}
                </ul>
              )}
            </section>
            <section
              className="bg-white rounded-3xl shadow-xl p-6 sm:p-8 space-y-6 border border-gray-200 animate-fade-in-up"
              style={{ animationDelay: '0.8s' }}
            >
              <h2 className="text-2xl font-bold text-gray-700">3) Auto-Generated Report</h2>
              <textarea
                id="report-ta"
                className="w-full h-80 border-2 border-gray-300 rounded-2xl p-4 font-mono text-base bg-gray-50/50 shadow-inner resize-y focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all duration-200"
                readOnly
                value={reportText}
              />
              <button
                onClick={copyReport}
                className="px-8 py-4 bg-emerald-500 text-white font-bold text-lg rounded-2xl shadow-lg hover:bg-emerald-600 active:scale-95 active:shadow-xl transition-all duration-200 ease-in-out transform hover:-translate-y-1"
              >
                Copy Report
              </button>
            </section>
          </div>
        );
      }
      ReactDOM.createRoot(document.getElementById('root')).render(<StudyStreakApp />);
    </script>
  </body>
</html>
